import{u as _,j as e,a as l,b as w,r as x,g as j,e as L,f as N,h as M}from"./index-KBBg-Aam.js";const B="_cart_52w12_2",E="_header_52w12_8",D="_container_52w12_15",b="_title_52w12_21",P="_clear_52w12_31",I="_ready_52w12_46",V="_info_52w12_53",q="_quantity_52w12_59",Z="_sum_52w12_70",G="_doing_52w12_82",S="_back_52w12_87",$="_pay_52w12_100",s={cart:B,header:E,container:D,title:b,clear:P,ready:I,info:V,quantity:q,sum:Z,doing:G,back:S,pay:$},A="data:image/svg+xml,%3csvg%20width='30.000000'%20height='30.000000'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3crect%20id='iconfinder_shopping-cart_2561279%201'%20width='29.000000'%20height='29.000000'%20fill='%23FFFFFF'%20fill-opacity='0'/%3e%3cpath%20id='Vector'%20d='M9.66%2027.79C8.33%2027.79%207.25%2026.7%207.25%2025.37C7.25%2024.04%208.33%2022.95%209.66%2022.95C11%2022.95%2012.08%2024.04%2012.08%2025.37C12.08%2026.7%2011%2027.79%209.66%2027.79Z'%20stroke='%233F3F3F'%20stroke-opacity='1.000000'%20stroke-width='2.800000'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector'%20d='M24.16%2027.79C22.83%2027.79%2021.75%2026.7%2021.75%2025.37C21.75%2024.04%2022.83%2022.95%2024.16%2022.95C25.5%2022.95%2026.58%2024.04%2026.58%2025.37C26.58%2026.7%2025.5%2027.79%2024.16%2027.79Z'%20stroke='%233F3F3F'%20stroke-opacity='1.000000'%20stroke-width='2.800000'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector'%20d='M6.85%207.25L27.79%207.25L25.76%2017.38C25.65%2017.94%2025.34%2018.44%2024.9%2018.79C24.46%2019.15%2023.91%2019.34%2023.34%2019.33L10.57%2019.33C9.98%2019.33%209.41%2019.12%208.96%2018.74C8.52%2018.35%208.23%2017.81%208.15%2017.23L6.31%203.31C6.24%202.72%205.95%202.19%205.51%201.8C5.07%201.42%204.51%201.2%203.92%201.2L1.2%201.2'%20stroke='%233F3F3F'%20stroke-opacity='1.000000'%20stroke-width='2.800000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3c/svg%3e",z="data:image/svg+xml,%3csvg%20width='20.000000'%20height='20.000000'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs%3e%3cclipPath%20id='clip8_426'%3e%3crect%20id='iconfinder_trash-2_3324927%201'%20width='20.000000'%20height='20.000000'%20fill='white'%20fill-opacity='0'/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='iconfinder_trash-2_3324927%201'%20width='20.000000'%20height='20.000000'%20fill='%23FFFFFF'%20fill-opacity='0'/%3e%3cg%20clip-path='url(%23clip8_426)'%3e%3cpath%20id='Vector'%20d='M2.5%205L4.16%205L17.5%205'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3cpath%20id='Vector'%20d='M15.83%2016.66C15.83%2017.1%2015.65%2017.53%2015.34%2017.84C15.03%2018.15%2014.6%2018.33%2014.16%2018.33L5.83%2018.33C5.39%2018.33%204.96%2018.15%204.65%2017.84C4.34%2017.53%204.16%2017.1%204.16%2016.66L4.16%204.99L15.83%204.99L15.83%2016.66ZM6.66%204.99L6.66%203.33C6.66%202.89%206.84%202.46%207.15%202.15C7.46%201.84%207.89%201.66%208.33%201.66L11.66%201.66C12.1%201.66%2012.53%201.84%2012.84%202.15C13.15%202.46%2013.33%202.89%2013.33%203.33L13.33%204.99'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3cpath%20id='Vector'%20d='M8.33%209.16L8.33%2014.16'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3cpath%20id='Vector'%20d='M11.66%209.16L11.66%2014.16'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3c/g%3e%3c/svg%3e",O={},R="_line_1t2x2_2",U="_cart_1t2x2_7",X="_img_1t2x2_17",H="_box_1t2x2_26",J="_container_1t2x2_34",K="_name_1t2x2_38",Q="_memory_1t2x2_47",T="_wrapper_1t2x2_56",W="_action_1t2x2_65",Y="_count_1t2x2_81",e0="_price_1t2x2_90",r={line:R,cart:U,img:X,box:H,container:J,name:K,memory:Q,wrapper:T,action:W,count:Y,price:e0,delete:"_delete_1t2x2_94"},t0="data:image/svg+xml,%3csvg%20width='32.000000'%20height='32.000000'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='16.000000'%20fill='%23FFFFFF'%20fill-opacity='1.000000'/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='15.000000'%20stroke='%23FE5F1E'%20stroke-opacity='1.000000'%20stroke-width='2.000000'/%3e%3cpath%20id='Vector'%20d='M19.84%2015.04L15.04%2015.04L12.16%2015.04C11.63%2015.04%2011.2%2015.46%2011.2%2016C11.2%2016.53%2011.63%2016.95%2012.16%2016.95L15.04%2016.95L19.84%2016.95C20.37%2016.95%2020.8%2016.53%2020.8%2016C20.8%2015.46%2020.37%2015.04%2019.84%2015.04Z'%20fill='%23FE5F1E'%20fill-opacity='1.000000'%20fill-rule='evenodd'/%3e%3c/svg%3e",c0="data:image/svg+xml,%3csvg%20width='32.000000'%20height='32.000000'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='16.000000'%20fill='%23FFFFFF'%20fill-opacity='1.000000'/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='15.000000'%20stroke='%23FE5F1E'%20stroke-opacity='1.000000'%20stroke-width='2.000000'/%3e%3cpath%20id='Vector'%20d='M19.84%2015.04L16.96%2015.04L16.96%2012.16C16.96%2011.62%2016.53%2011.2%2016%2011.2C15.47%2011.2%2015.04%2011.62%2015.04%2012.16L15.04%2015.04L12.16%2015.04C11.63%2015.04%2011.2%2015.46%2011.2%2016C11.2%2016.53%2011.63%2016.95%2012.16%2016.95L15.04%2016.95L15.04%2019.84C15.04%2020.37%2015.47%2020.8%2016%2020.8C16.53%2020.8%2016.96%2020.37%2016.96%2019.84L16.96%2016.95L19.84%2016.95C20.37%2016.95%2020.8%2016.53%2020.8%2016C20.8%2015.46%2020.37%2015.04%2019.84%2015.04Z'%20fill='%23EB5A1E'%20fill-opacity='1.000000'%20fill-rule='nonzero'/%3e%3c/svg%3e",i0="data:image/svg+xml,%3csvg%20width='32.000000'%20height='32.000000'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='16.000000'%20fill='%23FFFFFF'%20fill-opacity='1.000000'/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='15.000000'%20stroke='%23D7D7D7'%20stroke-opacity='1.000000'%20stroke-width='2.000000'/%3e%3cpath%20id='Vector'%20d='M19.74%2017.95L17.49%2015.7L19.74%2013.45C20.16%2013.04%2020.16%2012.37%2019.74%2011.95C19.33%2011.54%2018.66%2011.54%2018.24%2011.95L16%2014.2L13.75%2011.95C13.33%2011.54%2012.66%2011.54%2012.25%2011.95C11.83%2012.37%2011.83%2013.04%2012.25%2013.45L14.5%2015.7L12.25%2017.95C11.83%2018.36%2011.83%2019.04%2012.25%2019.45C12.66%2019.86%2013.33%2019.86%2013.75%2019.45L16%2017.2L18.24%2019.45C18.66%2019.86%2019.33%2019.86%2019.74%2019.45C20.16%2019.04%2020.16%2018.36%2019.74%2017.95Z'%20fill='%23D0D0D0'%20fill-opacity='1.000000'%20fill-rule='nonzero'/%3e%3c/svg%3e";function s0(t){const a=_();return e.jsxs("div",{children:[e.jsx("hr",{className:r.line}),e.jsxs("div",{className:r.cart,children:[e.jsx("div",{style:{backgroundImage:`url(${t.image})`},className:r.img}),e.jsxs("div",{className:r.box,children:[e.jsxs("div",{className:r.container,children:[e.jsx("div",{className:r.name,children:t.name}),e.jsx("div",{className:r.memory,children:t.memory})]}),e.jsxs("div",{className:r.wrapper,children:[e.jsxs("div",{className:r.action,children:[e.jsx("img",{onClick:()=>a(l.decrease({id:t.id,memory:t.memory})),src:t0,alt:"убавить количество"}),e.jsx("div",{className:r.count,children:t.count}),e.jsx("img",{onClick:()=>a(l.increase({id:t.id,memory:t.memory})),src:c0,alt:"прибавить количество"})]}),e.jsxs("div",{className:r.price,children:[t.price," ₽"]}),e.jsx("img",{onClick:()=>a(l.delete({id:t.id,memory:t.memory})),className:r.delete,src:i0,alt:"удалить"})]})]})]})]})}function r0({cartDevices:t}){return e.jsx("div",{className:O.cartList,children:t.map(a=>e.jsx(s0,{...a},a.id+a.memory))})}function o0(){const t=w(i=>i.cart.cartDevices),[a,p]=x.useState([]),g=w(i=>{var c;return(c=i.user.profile)==null?void 0:c.id}),[k,y]=x.useState(!1),u=j(),h=_(),d=a.reduce((i,c)=>(i.quantity+=1,i.price+=c.price*c.count,i),{quantity:0,price:0});x.useEffect(()=>{v()},[t]);const C=async(i,c,n)=>{const{data:o}=await L.get(N+"/device/"+i);return{id:o.id,memory:c,count:n,name:o.name,price:o.memoryPrice.filter(m=>m.memory==c)[0].price,image:o.image}},v=async()=>{const i=await Promise.all(t.map(c=>C(c.id,c.memory,c.count)));p(i)},f=async()=>{function i(n,o){let m=n+Math.random()*(o+1-n),F=n+Math.random()*(o+1-n);return Math.floor(m)+Math.floor(F)}const c=i(1e3,2e4);h(M({idUser:g,idOrder:c,date:new Date().toLocaleDateString(),order:a,calculator:{...d}})),h(l.clear()),y(!0)};return e.jsxs("div",{className:s.cart,children:[e.jsxs("div",{className:s.header,children:[e.jsx("img",{src:A,alt:""}),e.jsx("div",{className:s.title,children:" Корзина"}),e.jsxs("div",{className:s.container,children:[e.jsx("img",{src:z,alt:""}),e.jsx("div",{className:s.clear,onClick:()=>h(l.clear()),children:"очистить корзину"})]})]}),k&&e.jsx("div",{className:s.ready,children:"Заказ оформлен 😍"}),e.jsx(r0,{cartDevices:a}),e.jsxs("div",{className:s.info,children:[e.jsxs("div",{className:s.quantity,children:["Всего девайсов ",e.jsxs("span",{children:[" ",d.quantity," шт."]})]}),e.jsxs("div",{className:s.sum,children:["Cумма заказа: ",e.jsxs("span",{children:[d.price," ₽"]})]})]}),e.jsxs("div",{className:s.doing,children:[e.jsx("div",{className:s.back,onClick:()=>u("/Megazine/show/menu"),children:"Назад"}),e.jsx("button",{className:s.pay,disabled:d.price==0,onClick:()=>f(),children:" Заказать"})]})]})}export{o0 as default};
