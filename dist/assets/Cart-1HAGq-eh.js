import{u as _,j as e,a as d,b as x,r as w,g as f,e as F,f as j,h as L}from"./index-Co1mVa9Y.js";const N="_cart_4ak3q_2",M="_header_4ak3q_8",q="_container_4ak3q_15",B="_title_4ak3q_21",E="_clear_4ak3q_31",D="_info_4ak3q_46",b="_quantity_4ak3q_52",P="_sum_4ak3q_63",I="_doing_4ak3q_75",V="_back_4ak3q_80",Z="_pay_4ak3q_93",r={cart:N,header:M,container:q,title:B,clear:E,info:D,quantity:b,sum:P,doing:I,back:V,pay:Z},G="data:image/svg+xml,%3csvg%20width='30.000000'%20height='30.000000'%20viewBox='0%200%2030%2030'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3crect%20id='iconfinder_shopping-cart_2561279%201'%20width='29.000000'%20height='29.000000'%20fill='%23FFFFFF'%20fill-opacity='0'/%3e%3cpath%20id='Vector'%20d='M9.66%2027.79C8.33%2027.79%207.25%2026.7%207.25%2025.37C7.25%2024.04%208.33%2022.95%209.66%2022.95C11%2022.95%2012.08%2024.04%2012.08%2025.37C12.08%2026.7%2011%2027.79%209.66%2027.79Z'%20stroke='%233F3F3F'%20stroke-opacity='1.000000'%20stroke-width='2.800000'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector'%20d='M24.16%2027.79C22.83%2027.79%2021.75%2026.7%2021.75%2025.37C21.75%2024.04%2022.83%2022.95%2024.16%2022.95C25.5%2022.95%2026.58%2024.04%2026.58%2025.37C26.58%2026.7%2025.5%2027.79%2024.16%2027.79Z'%20stroke='%233F3F3F'%20stroke-opacity='1.000000'%20stroke-width='2.800000'%20stroke-linejoin='round'/%3e%3cpath%20id='Vector'%20d='M6.85%207.25L27.79%207.25L25.76%2017.38C25.65%2017.94%2025.34%2018.44%2024.9%2018.79C24.46%2019.15%2023.91%2019.34%2023.34%2019.33L10.57%2019.33C9.98%2019.33%209.41%2019.12%208.96%2018.74C8.52%2018.35%208.23%2017.81%208.15%2017.23L6.31%203.31C6.24%202.72%205.95%202.19%205.51%201.8C5.07%201.42%204.51%201.2%203.92%201.2L1.2%201.2'%20stroke='%233F3F3F'%20stroke-opacity='1.000000'%20stroke-width='2.800000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3c/svg%3e",$="data:image/svg+xml,%3csvg%20width='20.000000'%20height='20.000000'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs%3e%3cclipPath%20id='clip8_426'%3e%3crect%20id='iconfinder_trash-2_3324927%201'%20width='20.000000'%20height='20.000000'%20fill='white'%20fill-opacity='0'/%3e%3c/clipPath%3e%3c/defs%3e%3crect%20id='iconfinder_trash-2_3324927%201'%20width='20.000000'%20height='20.000000'%20fill='%23FFFFFF'%20fill-opacity='0'/%3e%3cg%20clip-path='url(%23clip8_426)'%3e%3cpath%20id='Vector'%20d='M2.5%205L4.16%205L17.5%205'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3cpath%20id='Vector'%20d='M15.83%2016.66C15.83%2017.1%2015.65%2017.53%2015.34%2017.84C15.03%2018.15%2014.6%2018.33%2014.16%2018.33L5.83%2018.33C5.39%2018.33%204.96%2018.15%204.65%2017.84C4.34%2017.53%204.16%2017.1%204.16%2016.66L4.16%204.99L15.83%204.99L15.83%2016.66ZM6.66%204.99L6.66%203.33C6.66%202.89%206.84%202.46%207.15%202.15C7.46%201.84%207.89%201.66%208.33%201.66L11.66%201.66C12.1%201.66%2012.53%201.84%2012.84%202.15C13.15%202.46%2013.33%202.89%2013.33%203.33L13.33%204.99'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3cpath%20id='Vector'%20d='M8.33%209.16L8.33%2014.16'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3cpath%20id='Vector'%20d='M11.66%209.16L11.66%2014.16'%20stroke='%23B6B6B6'%20stroke-opacity='1.000000'%20stroke-width='1.200000'%20stroke-linejoin='round'%20stroke-linecap='round'/%3e%3c/g%3e%3c/svg%3e",A={},S="_line_1t2x2_2",z="_cart_1t2x2_7",O="_img_1t2x2_17",R="_box_1t2x2_26",U="_container_1t2x2_34",X="_name_1t2x2_38",H="_memory_1t2x2_47",J="_wrapper_1t2x2_56",K="_action_1t2x2_65",Q="_count_1t2x2_81",T="_price_1t2x2_90",s={line:S,cart:z,img:O,box:R,container:U,name:X,memory:H,wrapper:J,action:K,count:Q,price:T,delete:"_delete_1t2x2_94"},W="data:image/svg+xml,%3csvg%20width='32.000000'%20height='32.000000'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='16.000000'%20fill='%23FFFFFF'%20fill-opacity='1.000000'/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='15.000000'%20stroke='%23FE5F1E'%20stroke-opacity='1.000000'%20stroke-width='2.000000'/%3e%3cpath%20id='Vector'%20d='M19.84%2015.04L15.04%2015.04L12.16%2015.04C11.63%2015.04%2011.2%2015.46%2011.2%2016C11.2%2016.53%2011.63%2016.95%2012.16%2016.95L15.04%2016.95L19.84%2016.95C20.37%2016.95%2020.8%2016.53%2020.8%2016C20.8%2015.46%2020.37%2015.04%2019.84%2015.04Z'%20fill='%23FE5F1E'%20fill-opacity='1.000000'%20fill-rule='evenodd'/%3e%3c/svg%3e",Y="data:image/svg+xml,%3csvg%20width='32.000000'%20height='32.000000'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='16.000000'%20fill='%23FFFFFF'%20fill-opacity='1.000000'/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='15.000000'%20stroke='%23FE5F1E'%20stroke-opacity='1.000000'%20stroke-width='2.000000'/%3e%3cpath%20id='Vector'%20d='M19.84%2015.04L16.96%2015.04L16.96%2012.16C16.96%2011.62%2016.53%2011.2%2016%2011.2C15.47%2011.2%2015.04%2011.62%2015.04%2012.16L15.04%2015.04L12.16%2015.04C11.63%2015.04%2011.2%2015.46%2011.2%2016C11.2%2016.53%2011.63%2016.95%2012.16%2016.95L15.04%2016.95L15.04%2019.84C15.04%2020.37%2015.47%2020.8%2016%2020.8C16.53%2020.8%2016.96%2020.37%2016.96%2019.84L16.96%2016.95L19.84%2016.95C20.37%2016.95%2020.8%2016.53%2020.8%2016C20.8%2015.46%2020.37%2015.04%2019.84%2015.04Z'%20fill='%23EB5A1E'%20fill-opacity='1.000000'%20fill-rule='nonzero'/%3e%3c/svg%3e",e0="data:image/svg+xml,%3csvg%20width='32.000000'%20height='32.000000'%20viewBox='0%200%2032%2032'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdesc%3e%20Created%20with%20Pixso.%20%3c/desc%3e%3cdefs/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='16.000000'%20fill='%23FFFFFF'%20fill-opacity='1.000000'/%3e%3ccircle%20id='Ellipse%201'%20cx='16.000000'%20cy='16.000000'%20r='15.000000'%20stroke='%23D7D7D7'%20stroke-opacity='1.000000'%20stroke-width='2.000000'/%3e%3cpath%20id='Vector'%20d='M19.74%2017.95L17.49%2015.7L19.74%2013.45C20.16%2013.04%2020.16%2012.37%2019.74%2011.95C19.33%2011.54%2018.66%2011.54%2018.24%2011.95L16%2014.2L13.75%2011.95C13.33%2011.54%2012.66%2011.54%2012.25%2011.95C11.83%2012.37%2011.83%2013.04%2012.25%2013.45L14.5%2015.7L12.25%2017.95C11.83%2018.36%2011.83%2019.04%2012.25%2019.45C12.66%2019.86%2013.33%2019.86%2013.75%2019.45L16%2017.2L18.24%2019.45C18.66%2019.86%2019.33%2019.86%2019.74%2019.45C20.16%2019.04%2020.16%2018.36%2019.74%2017.95Z'%20fill='%23D0D0D0'%20fill-opacity='1.000000'%20fill-rule='nonzero'/%3e%3c/svg%3e";function t0(t){const a=_();return e.jsxs("div",{children:[e.jsx("hr",{className:s.line}),e.jsxs("div",{className:s.cart,children:[e.jsx("div",{style:{backgroundImage:`url(${t.image})`},className:s.img}),e.jsxs("div",{className:s.box,children:[e.jsxs("div",{className:s.container,children:[e.jsx("div",{className:s.name,children:t.name}),e.jsx("div",{className:s.memory,children:t.memory})]}),e.jsxs("div",{className:s.wrapper,children:[e.jsxs("div",{className:s.action,children:[e.jsx("img",{onClick:()=>a(d.decrease({id:t.id,memory:t.memory})),src:W,alt:"убавить количество"}),e.jsx("div",{className:s.count,children:t.count}),e.jsx("img",{onClick:()=>a(d.increase({id:t.id,memory:t.memory})),src:Y,alt:"прибавить количество"})]}),e.jsxs("div",{className:s.price,children:[t.price," ₽"]}),e.jsx("img",{onClick:()=>a(d.delete({id:t.id,memory:t.memory})),className:s.delete,src:e0,alt:"удалить"})]})]})]})]})}function i0({cartDevices:t}){return e.jsx("div",{className:A.cartList,children:t.map(a=>e.jsx(t0,{...a},a.id+a.memory))})}function s0(){const t=x(c=>c.cart.cartDevices),[a,k]=w.useState([]),p=x(c=>{var i;return(i=c.user.profile)==null?void 0:i.id}),g=f(),m=_(),l=a.reduce((c,i)=>(c.quantity+=1,c.price+=i.price*i.count,c),{quantity:0,price:0});w.useEffect(()=>{u()},[t]);const C=async(c,i,n)=>{const{data:o}=await F.get(j+"/device/"+c);return{id:o.id,memory:i,count:n,name:o.name,price:o.memoryPrice.filter(h=>h.memory==i)[0].price,image:o.image}},u=async()=>{const c=await Promise.all(t.map(i=>C(i.id,i.memory,i.count)));k(c)},v=async()=>{function c(n,o){let h=n+Math.random()*(o+1-n),y=n+Math.random()*(o+1-n);return Math.floor(h)+Math.floor(y)}const i=c(1e3,2e4);m(L({idUser:p,idOrder:i,date:new Date().toLocaleDateString(),order:a,calculator:{...l}}))};return e.jsxs("div",{className:r.cart,children:[e.jsxs("div",{className:r.header,children:[e.jsx("img",{src:G,alt:""}),e.jsx("div",{className:r.title,children:" Корзина"}),e.jsxs("div",{className:r.container,children:[e.jsx("img",{src:$,alt:""}),e.jsx("div",{className:r.clear,onClick:()=>m(d.clear()),children:"очистить корзину"})]})]}),e.jsx(i0,{cartDevices:a}),e.jsxs("div",{className:r.info,children:[e.jsxs("div",{className:r.quantity,children:["Всего девайсов ",e.jsxs("span",{children:[" ",l.quantity," шт."]})]}),e.jsxs("div",{className:r.sum,children:["Cумма заказа: ",e.jsxs("span",{children:[l.price," ₽"]})]})]}),e.jsxs("div",{className:r.doing,children:[e.jsx("div",{className:r.back,onClick:()=>g("/Megazine/show/menu"),children:"Назад"}),e.jsx("button",{className:r.pay,disabled:l.price==0,onClick:()=>v(),children:" Заказать"})]})]})}export{s0 as default};
